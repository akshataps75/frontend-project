<!--define 3 disytinct sections- start, quiz, results-->
<!DOCTYPE html>
<html>

<head>
  <title>Frontend quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="app.css">
</head>

<body>
  <div class="container d-flex justify-content-center">
    <div class="card quiz-card text-center">

      @if (currentStep === 'start') {
      <div class="card-body">
        <h1 class="card-title mb-3">Frontend Mastery</h1>
        <p class="card-text">A simple assessment designed to test your core knowledge of HTML, CSS and basic JavaScript
        </p>
        <button type="button" class="btn btn-custom" (click)="startQuiz()">Start Quiz</button>

      </div>
      }

      @else if (currentStep === 'quiz') {
      <div class="card-body">
        <div class="mb-4">
          <div class="d-flex justify-content-between mb-1">
            <span class="card-timer">Time remaining: {{timeLeft}}sec</span>
          </div>
          <div class="progress">
            <div 
              class="progress-bar"
              [style.width.%]="(timeLeft / 60) * 100">
            </div>
          </div>
        </div>
        <p class="card-text">
          Question {{currentQuestion + 1}} of {{questions.length}}
        </p>

        <h2 class="questions"> {{questions[currentQuestion].text}} </h2>

        <div class="d-flex flex-column gap-2">
          @for (option of questions[currentQuestion].options; track $index) {
          <button 
            class="btn btn-quiz-option" 
            (click)="handleAnswer($index)"
            [disabled]="isAnswered"
            [class.btn-correct]="isAnswered && $index === questions[currentQuestion].correctAnswer"
            [class.btn-wrong]="isAnswered && selectedOption === $index && $index !== questions[currentQuestion].correctAnswer">
            {{ option }}
          </button>
          }
        </div>
      </div>
      }

      @else if (currentStep === 'results') {
      <div class="card-body py-5">
        <h2 class="card-title mb-4">Quiz complete!</h2>
        <p class="card-text fs-4">Your score</p>
        <p class="card-text">{{ score }} / {{ questions.length }}</p>
        <button class="btn btn-custom" (click)="currentStep = 'start'">Try again</button>
      </div>
      }
    </div>
  </div>

</body>

</html>